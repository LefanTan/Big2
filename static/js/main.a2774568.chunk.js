(this.webpackJsonpbig2=this.webpackJsonpbig2||[]).push([[0],{11:function(e,t,n){e.exports={Container:"LobbyPage_Container__3w_jx",inputContainer:"LobbyPage_inputContainer__29TIG",leftBackgroundContainer:"LobbyPage_leftBackgroundContainer__2ZiVT",leftBackground:"LobbyPage_leftBackground__1QgYV",leftBackgroundClicked:"LobbyPage_leftBackgroundClicked__3ZbEx LobbyPage_leftBackground__1QgYV",rightBackgroundContainer:"LobbyPage_rightBackgroundContainer__2hBH9",rightBackground:"LobbyPage_rightBackground__37Yy-",rightBackgroundClicked:"LobbyPage_rightBackgroundClicked__3IqH5 LobbyPage_rightBackground__37Yy-",titleContainer:"LobbyPage_titleContainer__1ea2C",rowContainer:"LobbyPage_rowContainer__23BHn",playButton:"LobbyPage_playButton__3Jb8l index_genericButton__33zSg",button:"LobbyPage_button__2Gudc index_genericButton__33zSg",p:"LobbyPage_p__S3-xE index_genericText__3sj49",errorMsg:"LobbyPage_errorMsg__2JP4F index_genericText__3sj49",inputField:"LobbyPage_inputField__2rLH2 index_genericText__3sj49"}},14:function(e,t,n){e.exports={Container:"GamePage_Container__N989G",loadingContainer:"GamePage_loadingContainer__1Zro2",userCorner:"GamePage_userCorner__2EhId",exitButton:"GamePage_exitButton__gUP_W",exitTooltip:"GamePage_exitTooltip__1j4t5",exitIcon:"GamePage_exitIcon__xTmUJ",rowContainer:"GamePage_rowContainer__3zHTx",readyCircle:"GamePage_readyCircle__1IsTO",playerReadyContainer:"GamePage_playerReadyContainer__3d0ov",words:"GamePage_words__1SO2V index_genericText__3sj49",playButton:"GamePage_playButton__2Tx0u index_genericButton__33zSg",p:"GamePage_p__1626i index_genericText__3sj49",h1:"GamePage_h1__1lcBd index_genericText__3sj49"}},27:function(e,t,n){e.exports={Container:"ErrorPage_Container__1I_k7",h1:"ErrorPage_h1__2UsE6 undefined"}},34:function(e,t,n){e.exports={Container:"App_Container__3iFbT"}},35:function(e,t,n){e.exports={Container:"Deck_Container__deUXb"}},42:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(33),i=n.n(r),o=(n(42),n(34)),s=n.n(o),l=n(30),u=n(13),d=n(35),b=n.n(d),j=n(22);j.a.initializeApp({apiKey:"AIzaSyA__laCqzqZe3MmI3_TC_F1ywdMvo4vprg",authDomain:"big2-4e418.firebaseapp.com",databaseURL:"https://big2-4e418-default-rtdb.firebaseio.com"});j.a.auth;var _=j.a.database(),g=n(4);function h(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],r=n[1],i=Object(a.useRef)(null);return Object(a.useEffect)((function(){_.ref().child("Lobbies").child(e.lobbyCode).child("deck").on("value",(function(e){e.exists()&&r(Object.values(e.val()))}))}),[]),Object(a.useEffect)((function(){i.current.scrollIntoView({behavior:"smooth"})}),[c]),Object(g.jsxs)("div",{className:b.a.Container,children:[c.map((function(e,t){return Object(g.jsxs)("p",{children:[e.content," - ",e.sender]},e+t)})),Object(g.jsx)("div",{ref:i})]})}function f(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],i=0,o=0;switch(Object(a.useEffect)((function(){}),[]),e.playerNo.toString()){case"1":i=3,o=3;break;case"2":i=2,o=5;break;case"3":i=1,o=3;break;case"4":i=2,o=1;break;default:throw new Error("Invalid Player Number")}var s={backgroundColor:"beige",gridRowStart:"".concat(i),gridColumnStart:"".concat(o),width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};return Object(g.jsxs)("div",{style:s,children:[Object(g.jsx)("p",{children:e.children}),1===e.playerNo&&Object(g.jsx)("form",{onSubmit:function(t){t.preventDefault(),_.ref().child("Lobbies").child(e.lobbyCode).child("deck").push({sender:e.playerData.name,timestamp:Date.now(),content:c}),r("")},children:Object(g.jsx)("input",{type:"text",value:c,onChange:function(e){return r(e.target.value)}})})]})}var p=n(14),x=n.n(p),m=n(8),O=n(37),y=n(27),C=n.n(y);function v(e){return Object(g.jsx)("div",{className:C.a.Container,children:Object(g.jsx)("h1",{className:C.a.h1,children:e.children})})}var k=n.p+"static/media/circle.53f8fa04.png",B=n.p+"static/media/circle-filled.140c7c5b.png";function P(){var e=_.ref().child("Lobbies"),t=Object(m.g)(),n=Object(m.f)(),c=Object(a.useState)(!1),r=Object(u.a)(c,2),i=r[0],o=r[1],s=Object(a.useState)(!0),d=Object(u.a)(s,2),b=d[0],j=d[1],p=Object(a.useState)(!1),y=Object(u.a)(p,2),C=y[0],P=y[1],N=Object(a.useState)([]),L=Object(u.a)(N,2),w=L[0],S=L[1],E=t.search.indexOf("code="),T=t.search.indexOf("name="),G=t.search.substring(E+5,T-1),I=t.search.substring(T+5),D=2;Object(a.useEffect)((function(){i&&e.child(G).on("value",(function(e){e.exists()&&S(e.val().players)}))}),[i]),Object(a.useEffect)((function(){return window.addEventListener("beforeunload",F),window.addEventListener("unload",M),function(){window.removeEventListener("beforeunload",F),window.removeEventListener("unload",M)}})),Object(a.useEffect)((function(){setTimeout((function(){Object.keys(w).length>0&&"undefined"===typeof Object.values(w).find((function(e){return!1===e.ready}))&&P(!0)}),1e3)}),[w]),Object(a.useEffect)((function(){e.orderByKey().equalTo(G).once("value",(function(e){o(e.exists()),j(!1)}))}),[G]);var F=function(e){e.preventDefault(),e.returnValue=""},M=function(){Object.entries(w).forEach((function(t){var n=Object(u.a)(t,2),a=n[0];n[1].name===I&&e.child("".concat(G,"/players/").concat(a)).remove()})),e.child("".concat(G,"/players")).once("value",(function(t){t.exists()||e.child(G).remove()})),n.push("/lobby")};return b?Object(g.jsx)("div",{className:x.a.loadingContainer,children:Object(g.jsx)("h1",{className:x.a.h1,children:"Loading..."})}):i?Object(g.jsxs)("div",{className:x.a.Container,children:[!C&&Object(g.jsxs)("div",{className:x.a.playerReadyContainer,children:[Object(g.jsx)("div",{className:x.a.rowContainer,children:Object.values(w).map((function(e){return Object(g.jsx)("img",{src:e.ready?B:k,className:x.a.readyCircle,alt:"ready button"},e.name)}))}),Object(g.jsx)("button",{className:x.a.playButton,onClick:function(){var t=Object.keys(w).find((function(e){return w[e].name===I})),n=e.child(G).child("/players/".concat(t));n.once("value",(function(e){n.set(Object(l.a)(Object(l.a)({},e.val()),{},{ready:!0}))}))},children:"Ready!"}),Object(g.jsx)("p",{className:x.a.words,children:"please make sure you're actually ready \u2609_\u2609"})]}),Object(g.jsxs)("div",{className:x.a.userCorner,children:[Object(g.jsxs)("button",{className:x.a.exitButton,onClick:function(){return M()},children:[Object(g.jsx)(O.a,{className:x.a.exitIcon}),Object(g.jsx)("p",{className:x.a.exitTooltip,children:"Exit"})]}),Object(g.jsxs)("p",{className:x.a.p,children:["CODE: ",G]})]}),Object.values(w).map((function(e,t){var n=e.name===I?1:D++;return Object(g.jsx)(f,{playerData:e,playerIndex:t,lobbyCode:G,playerNo:n,children:e.name},n)})),Object(g.jsx)(h,{lobbyCode:G})]}):Object(g.jsx)(v,{children:"404 Lobby not found"})}var N=n(11),L=n.n(N),w=n.p+"static/media/leftBackground.66308860.png",S=n.p+"static/media/rightBackground.f3f3e34f.png";function E(){var e=Object(m.f)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(!1),b=Object(u.a)(d,2),j=b[0],h=b[1],f=Object(a.useState)(""),p=Object(u.a)(f,2),x=p[0],O=p[1],y=_.ref().child("Lobbies"),C=function(){return 0!==s.length||(O("Please enter a name"),!1)},v=function(){var e=Math.floor(36*Math.random());return e<10?e.toString():String.fromCharCode(55+e)};return Object(g.jsxs)("div",{className:L.a.Container,children:[j?Object(g.jsxs)("div",{className:L.a.inputContainer,children:[Object(g.jsx)("p",{className:L.a.p,children:"Lobby Code"}),Object(g.jsx)("form",{onSubmit:function(t){(t.preventDefault(),C())&&(""!==c?(y.orderByKey().equalTo(c).once("value",(function(t){t.exists()?(t.val()[c].players.length>=4&&O("Lobby full"),y.child("".concat(c)).child("players").push({name:s,ready:!1}).then(e.push({pathname:"/game",search:"?code=".concat(c,"&name=").concat(s)}))):O("Lobby doesn't exist")})),r("")):O("Please enter a lobby code"))},children:Object(g.jsxs)("div",{className:L.a.rowContainer,children:[Object(g.jsx)("input",{className:L.a.inputField,value:c,onChange:function(e){return r(e.target.value.toUpperCase())},type:"text"}),Object(g.jsx)("button",{className:L.a.button,type:"submit",children:"Enter"}),Object(g.jsx)("p",{className:L.a.p,children:"\u2002Or\u2002"})," ",Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:L.a.button,onClick:function(t){if(t.preventDefault(),C()){c=v()+v()+v()+v(),y.orderByKey().equalTo(c).once("value",(function(e){e.exists()&&(c=v()+v()+v()+v())}));var n=_.ref().child("Lobbies/".concat(c));n.set({id:c}),n.child("players").push({name:s,ready:!1}),e.push({pathname:"/game",search:"?code=".concat(c,"&name=").concat(s)})}},children:"Create A Room"})]})}),Object(g.jsx)("p",{className:L.a.p,children:"Player Name"}),Object(g.jsx)("input",{className:L.a.inputField,value:s,onChange:function(e){return l(e.target.value)},type:"text"}),""!==x&&Object(g.jsx)("h1",{className:L.a.errorMsg,children:x})]}):Object(g.jsx)("button",{className:L.a.playButton,onClick:function(){return h(!0)},children:"Play"}),Object(g.jsx)("div",{className:L.a.leftBackgroundContainer,children:Object(g.jsx)("img",{src:w,alt:"leftBackground",className:j?L.a.leftBackgroundClicked:L.a.leftBackground})}),Object(g.jsx)("div",{className:L.a.rightBackgroundContainer,children:Object(g.jsx)("img",{src:S,alt:"rightBackground",className:j?L.a.rightBackgroundClicked:L.a.rightBackground})})]})}var T=n(25);var G=function(){return Object(g.jsx)("div",{className:s.a.Container,children:Object(g.jsx)(T.a,{children:Object(g.jsxs)(m.c,{children:[Object(g.jsx)(m.a,{path:"/",exact:!0,component:E}),Object(g.jsx)(m.a,{path:"/lobby",exact:!0,component:E}),Object(g.jsx)(m.a,{path:"/game",exact:!0,component:P}),Object(g.jsx)(m.a,{path:"*",component:function(){return Object(g.jsx)(v,{children:"404 Page not found"})}})]})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(G,{})}),document.getElementById("root")),I()}},[[53,1,2]]]);
//# sourceMappingURL=main.a2774568.chunk.js.map