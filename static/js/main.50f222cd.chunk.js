(this.webpackJsonpbig2=this.webpackJsonpbig2||[]).push([[0],{11:function(e,t,n){e.exports={Container:"LobbyPage_Container__3w_jx",inputContainer:"LobbyPage_inputContainer__29TIG",leftBackgroundContainer:"LobbyPage_leftBackgroundContainer__2ZiVT",leftBackground:"LobbyPage_leftBackground__1QgYV",leftBackgroundClicked:"LobbyPage_leftBackgroundClicked__3ZbEx LobbyPage_leftBackground__1QgYV",rightBackgroundContainer:"LobbyPage_rightBackgroundContainer__2hBH9",rightBackground:"LobbyPage_rightBackground__37Yy-",rightBackgroundClicked:"LobbyPage_rightBackgroundClicked__3IqH5 LobbyPage_rightBackground__37Yy-",titleContainer:"LobbyPage_titleContainer__1ea2C",rowContainer:"LobbyPage_rowContainer__23BHn",playButton:"LobbyPage_playButton__3Jb8l index_genericButton__33zSg",button:"LobbyPage_button__2Gudc index_genericButton__33zSg",p:"LobbyPage_p__S3-xE index_genericText__3sj49",errorMsg:"LobbyPage_errorMsg__2JP4F index_genericText__3sj49",inputField:"LobbyPage_inputField__2rLH2 index_genericText__3sj49"}},17:function(e,t,n){e.exports={Container:"GamePage_Container__N989G",loadingContainer:"GamePage_loadingContainer__1Zro2",userCorner:"GamePage_userCorner__2EhId",exitButton:"GamePage_exitButton__gUP_W",exitTooltip:"GamePage_exitTooltip__1j4t5",exitIcon:"GamePage_exitIcon__xTmUJ",p:"GamePage_p__1626i index_genericText__3sj49",h1:"GamePage_h1__1lcBd index_genericText__3sj49"}},27:function(e,t,n){e.exports={Container:"ErrorPage_Container__1I_k7",h1:"ErrorPage_h1__2UsE6 undefined"}},33:function(e,t,n){e.exports={Container:"App_Container__3iFbT"}},34:function(e,t,n){e.exports={Container:"Deck_Container__deUXb"}},41:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(32),o=n.n(r),i=(n(41),n(33)),s=n.n(i),l=n(13),b=n(34),u=n.n(b),d=n(22);d.a.initializeApp({apiKey:"AIzaSyA__laCqzqZe3MmI3_TC_F1ywdMvo4vprg",authDomain:"big2-4e418.firebaseapp.com",databaseURL:"https://big2-4e418-default-rtdb.firebaseio.com"});d.a.auth;var j=d.a.database(),g=n(4);function h(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],r=n[1],o=Object(a.useRef)(null);return Object(a.useEffect)((function(){j.ref().child("Lobbies").child(e.lobbyCode).child("deck").on("value",(function(e){e.exists()&&r(Object.values(e.val()))}))}),[]),Object(a.useEffect)((function(){o.current.scrollIntoView({behavior:"smooth"})}),[c]),Object(g.jsxs)("div",{className:u.a.Container,children:[c.map((function(e,t){return Object(g.jsxs)("p",{children:[e.content," - ",e.sender]},e+t)})),Object(g.jsx)("div",{ref:o})]})}function _(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],o=0,i=0;switch(Object(a.useEffect)((function(){}),[]),e.playerNo.toString()){case"1":o=3,i=3;break;case"2":o=2,i=5;break;case"3":o=1,i=3;break;case"4":o=2,i=1;break;default:throw new Error("Invalid Player Number")}var s={backgroundColor:"beige",gridRowStart:"".concat(o),gridColumnStart:"".concat(i),width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};return Object(g.jsxs)("div",{style:s,children:[Object(g.jsx)("p",{children:e.children}),1===e.playerNo&&Object(g.jsx)("form",{onSubmit:function(t){t.preventDefault(),j.ref().child("Lobbies").child(e.lobbyCode).child("deck").push({sender:e.playerData.name,timestamp:Date.now(),content:c}),r("")},children:Object(g.jsx)("input",{type:"text",value:c,onChange:function(e){return r(e.target.value)}})})]})}var f=n(17),x=n.n(f),p=n(8),m=n(36),O=n(27),C=n.n(O);function y(e){return Object(g.jsx)("div",{className:C.a.Container,children:Object(g.jsx)("h1",{className:C.a.h1,children:e.children})})}function v(){var e=j.ref().child("Lobbies"),t=Object(p.g)(),n=Object(p.f)(),c=Object(a.useState)(!1),r=Object(l.a)(c,2),o=r[0],i=r[1],s=Object(a.useState)(!0),b=Object(l.a)(s,2),u=b[0],d=b[1],f=t.search.indexOf("code="),O=t.search.indexOf("name="),C=t.search.substring(f+5,O-1),v=t.search.substring(O+5),k=Object(a.useState)([]),B=Object(l.a)(k,2),P=B[0],N=B[1],L=2;Object(a.useEffect)((function(){o&&e.child(C).on("value",(function(e){e.exists()&&N(e.val().players)}));window.addEventListener("beforeunload",(function(e){return e.preventDefault(),e.returnValue="",console.log("test"),S()}))}),[o]),Object(a.useEffect)((function(){e.orderByKey().equalTo(C).once("value",(function(e){i(e.exists()),d(!1)}))}),[C]);var S=function(){Object.entries(P).forEach((function(t){var n=Object(l.a)(t,2),a=n[0];n[1].name===v&&e.child("".concat(C,"/players/").concat(a)).remove()})),e.child("".concat(C,"/players")).once("value",(function(t){t.exists()||e.child(C).remove()})),n.push("/lobby")};return u?Object(g.jsx)("div",{className:x.a.loadingContainer,children:Object(g.jsx)("h1",{className:x.a.h1,children:"Loading..."})}):o?Object(g.jsxs)("div",{className:x.a.Container,children:[Object(g.jsxs)("div",{className:x.a.userCorner,children:[Object(g.jsxs)("button",{className:x.a.exitButton,onClick:function(){return S()},children:[Object(g.jsx)(m.a,{className:x.a.exitIcon}),Object(g.jsx)("p",{className:x.a.exitTooltip,children:"Exit"})]}),Object(g.jsxs)("p",{className:x.a.p,children:["CODE: ",C]})]}),Object.values(P).map((function(e,t){var n=e.name===v?1:L++;return Object(g.jsx)(_,{playerData:e,playerIndex:t,lobbyCode:C,playerNo:n,children:e.name},n)})),Object(g.jsx)(h,{lobbyCode:C})]}):Object(g.jsx)(y,{children:"404 Lobby not found"})}var k=n(11),B=n.n(k),P=n.p+"static/media/leftBackground.66308860.png",N=n.p+"static/media/rightBackground.f3f3e34f.png";function L(){var e=Object(p.f)(),t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),s=i[0],b=i[1],u=Object(a.useState)(!1),d=Object(l.a)(u,2),h=d[0],_=d[1],f=Object(a.useState)(""),x=Object(l.a)(f,2),m=x[0],O=x[1],C=j.ref().child("Lobbies"),y=function(){return 0!==s.length||(O("Please enter a name"),!1)},v=function(){var e=Math.floor(36*Math.random());return e<10?e.toString():String.fromCharCode(55+e)};return Object(g.jsxs)("div",{className:B.a.Container,children:[h?Object(g.jsxs)("div",{className:B.a.inputContainer,children:[Object(g.jsx)("p",{className:B.a.p,children:"Lobby Code"}),Object(g.jsx)("form",{onSubmit:function(t){(t.preventDefault(),y())&&(""!==c?(C.orderByKey().equalTo(c).once("value",(function(t){t.exists()?(t.val()[c].players.length>=4&&O("Lobby full"),C.child("".concat(c)).child("players").push({name:s}).then(e.push({pathname:"/game",search:"?code=".concat(c,"&name=").concat(s)}))):O("Lobby doesn't exist")})),r("")):O("Please enter a lobby code"))},children:Object(g.jsxs)("div",{className:B.a.rowContainer,children:[Object(g.jsx)("input",{className:B.a.inputField,value:c,onChange:function(e){return r(e.target.value.toUpperCase())},type:"text"}),Object(g.jsx)("button",{className:B.a.button,type:"submit",children:"Enter"}),Object(g.jsx)("p",{className:B.a.p,children:"\u2002Or\u2002"})," ",Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:B.a.button,onClick:function(t){if(t.preventDefault(),y()){c=v()+v()+v()+v(),C.orderByKey().equalTo(c).once("value",(function(e){e.exists()&&(c=v()+v()+v()+v())}));var n=j.ref().child("Lobbies/".concat(c));n.set({id:c}),n.child("players").push({name:s}),e.push({pathname:"/game",search:"?code=".concat(c,"&name=").concat(s)})}},children:"Create A Room"})]})}),Object(g.jsx)("p",{className:B.a.p,children:"Player Name"}),Object(g.jsx)("input",{className:B.a.inputField,value:s,onChange:function(e){return b(e.target.value)},type:"text"}),""!==m&&Object(g.jsx)("h1",{className:B.a.errorMsg,children:m})]}):Object(g.jsx)("button",{className:B.a.playButton,onClick:function(){return _(!0)},children:"Play"}),Object(g.jsx)("div",{className:B.a.leftBackgroundContainer,children:Object(g.jsx)("img",{src:P,alt:"leftBackground",className:h?B.a.leftBackgroundClicked:B.a.leftBackground})}),Object(g.jsx)("div",{className:B.a.rightBackgroundContainer,children:Object(g.jsx)("img",{src:N,alt:"rightBackground",className:h?B.a.rightBackgroundClicked:B.a.rightBackground})})]})}var S=n(25);var E=function(){return Object(g.jsx)("div",{className:s.a.Container,children:Object(g.jsx)(S.a,{children:Object(g.jsxs)(p.c,{children:[Object(g.jsx)(p.a,{path:"/",exact:!0,component:L}),Object(g.jsx)(p.a,{path:"/lobby",exact:!0,component:L}),Object(g.jsx)(p.a,{path:"/game",exact:!0,component:v}),Object(g.jsx)(p.a,{path:"*",component:function(){return Object(g.jsx)(y,{children:"404 Page not found"})}})]})})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(E,{})}),document.getElementById("root")),T()}},[[52,1,2]]]);
//# sourceMappingURL=main.50f222cd.chunk.js.map