(this.webpackJsonpbig2=this.webpackJsonpbig2||[]).push([[0],{16:function(e,t,n){e.exports={Container:"GamePage_Container__N989G",loadingContainer:"GamePage_loadingContainer__1Zro2",userCorner:"GamePage_userCorner__2EhId",exitButton:"GamePage_exitButton__gUP_W",exitTooltip:"GamePage_exitTooltip__1j4t5",exitIcon:"GamePage_exitIcon__xTmUJ",p:"GamePage_p__1626i index_generalText__2dy3_",h1:"GamePage_h1__1lcBd index_generalText__2dy3_"}},26:function(e,t,n){e.exports={Container:"ErrorPage_Container__1I_k7",h1:"ErrorPage_h1__2UsE6 index_generalText__2dy3_"}},32:function(e,t,n){e.exports={Container:"App_Container__3iFbT"}},33:function(e,t,n){e.exports={Container:"Deck_Container__deUXb"}},35:function(e,t,n){e.exports={Container:"LobbyPage_Container__3w_jx"}},41:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(31),o=n.n(r),i=(n(41),n(32)),s=n.n(i),l=n(14),u=n(33),b=n.n(u),d=n(21);d.a.initializeApp({apiKey:"AIzaSyA__laCqzqZe3MmI3_TC_F1ywdMvo4vprg",authDomain:"big2-4e418.firebaseapp.com",databaseURL:"https://big2-4e418-default-rtdb.firebaseio.com"});d.a.auth;var j=d.a.database(),h=n(5);function f(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],r=n[1],o=Object(a.useRef)(null);return Object(a.useEffect)((function(){j.ref().child("Lobbies").child(e.lobbyCode).child("deck").on("value",(function(e){e.exists()&&r(Object.values(e.val()))}))}),[]),Object(a.useEffect)((function(){o.current.scrollIntoView({behavior:"smooth"})}),[c]),Object(h.jsxs)("div",{className:b.a.Container,children:[c.map((function(e,t){return Object(h.jsxs)("p",{children:[e.content," - ",e.sender]},e+t)})),Object(h.jsx)("div",{ref:o})]})}function x(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],o=0,i=0;switch(Object(a.useEffect)((function(){}),[]),e.playerNo.toString()){case"1":o=3,i=3;break;case"2":o=2,i=5;break;case"3":o=1,i=3;break;case"4":o=2,i=1;break;default:throw new Error("Invalid Player Number")}var s={backgroundColor:"beige",gridRowStart:"".concat(o),gridColumnStart:"".concat(i),width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};return Object(h.jsxs)("div",{style:s,children:[Object(h.jsx)("p",{children:e.children}),1===e.playerNo&&Object(h.jsx)("form",{onSubmit:function(t){t.preventDefault(),j.ref().child("Lobbies").child(e.lobbyCode).child("deck").push({sender:e.playerData.name,timestamp:Date.now(),content:c}),r("")},children:Object(h.jsx)("input",{type:"text",value:c,onChange:function(e){return r(e.target.value)}})})]})}var p=n(16),O=n.n(p),m=n(8),_=n(36),g=n(26),v=n.n(g);function C(e){return Object(h.jsx)("div",{className:v.a.Container,children:Object(h.jsx)("h1",{className:v.a.h1,children:e.children})})}function y(){var e=j.ref().child("Lobbies"),t=Object(m.g)(),n=Object(m.f)(),c=Object(a.useState)(!1),r=Object(l.a)(c,2),o=r[0],i=r[1],s=Object(a.useState)(!0),u=Object(l.a)(s,2),b=u[0],d=u[1],p=t.search.indexOf("code="),g=t.search.indexOf("name="),v=t.search.substring(p+5,g-1),y=t.search.substring(g+5),N=Object(a.useState)([]),E=Object(l.a)(N,2),P=E[0],S=E[1],L=2;Object(a.useEffect)((function(){o&&e.child(v).on("value",(function(e){e.exists()&&S(e.val().players)}))}),[o]),Object(a.useEffect)((function(){e.orderByKey().equalTo(v).once("value",(function(e){i(e.exists()),d(!1)}))}),[v]);return b?Object(h.jsx)("div",{className:O.a.loadingContainer,children:Object(h.jsx)("h1",{className:O.a.h1,children:"Loading..."})}):o?Object(h.jsxs)("div",{className:O.a.Container,children:[Object(h.jsxs)("div",{className:O.a.userCorner,children:[Object(h.jsxs)("button",{className:O.a.exitButton,onClick:function(){return Object.entries(P).forEach((function(t){var n=Object(l.a)(t,2),a=n[0];n[1].name===y&&e.child("".concat(v,"/players/").concat(a)).remove()})),e.child("".concat(v,"/players")).once("value",(function(t){t.exists()||e.child(v).remove().then(n.push("/lobby"))})),void n.push("/lobby")},children:[Object(h.jsx)(_.a,{className:O.a.exitIcon}),Object(h.jsx)("p",{className:O.a.exitTooltip,children:"Exit"})]}),Object(h.jsxs)("p",{className:O.a.p,children:["CODE: ",v]})]}),Object.values(P).map((function(e,t){var n=e.name===y?1:L++;return Object(h.jsx)(x,{playerData:e,playerIndex:t,lobbyCode:v,playerNo:n,children:e.name},n)})),Object(h.jsx)(f,{lobbyCode:v})]}):Object(h.jsx)(C,{children:"404 Lobby not found"})}var N=n(35),E=n.n(N);function P(){var e=Object(m.f)(),t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],b=j.ref().child("Lobbies"),d=function(){return 0!==s.length||(alert("Please enter a name"),!1)},f=function(){var e=Math.floor(36*Math.random());return e<10?e.toString():String.fromCharCode(55+e)};return Object(h.jsxs)("div",{className:E.a.Container,children:[Object(h.jsx)("p",{children:"LOBBY CODE"}),Object(h.jsxs)("form",{onSubmit:function(t){(t.preventDefault(),d()&&""!==c)&&(b.orderByKey().equalTo(c).once("value",(function(t){if(t.exists()){if(t.val()[c].players.length>=4)return;b.child("".concat(c)).child("players").push({name:s}).then(e.push({pathname:"/game",search:"?code=".concat(c,"&name=").concat(s)}))}else console.log("Lobby doesn't exist")})),r(""))},children:[Object(h.jsx)("input",{value:c,onChange:function(e){return r(e.target.value.toUpperCase())},type:"text"}),Object(h.jsx)("button",{type:"submit",children:"Enter"}),Object(h.jsx)("button",{onClick:function(t){if(t.preventDefault(),d()){c=f()+f()+f()+f(),b.orderByKey().equalTo(c).once("value",(function(e){e.exists()&&(c=f()+f()+f()+f())}));var n=j.ref().child("Lobbies/".concat(c));n.set({id:c}),n.child("players").push({name:s}),e.push({pathname:"/game",search:"?code=".concat(c,"&name=").concat(s)})}},children:"Create Room"})]}),Object(h.jsx)("p",{children:"PLAYER NAME"}),Object(h.jsx)("input",{value:s,onChange:function(e){return u(e.target.value)},type:"text"})]})}var S=n(24);var L=function(){return Object(h.jsx)("div",{className:s.a.Container,children:Object(h.jsx)(S.a,{children:Object(h.jsxs)(m.c,{children:[Object(h.jsx)(m.a,{path:"/",exact:!0,component:P}),Object(h.jsx)(m.a,{path:"/lobby",exact:!0,component:P}),Object(h.jsx)(m.a,{path:"/game",exact:!0,component:y}),Object(h.jsx)(m.a,{path:"*",component:function(){return Object(h.jsx)(C,{children:"404 Page not found"})}})]})})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("root")),T()}},[[52,1,2]]]);
//# sourceMappingURL=main.8a6ecfb2.chunk.js.map